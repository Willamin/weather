<!doctype html>
<html>
<head>
  <title>Weather</title>
  <link rel="apple-touch-icon-precomposed" href="favicon-152.png">
</head>
<body>
<div><h1>Chattanooga Forecast</h1></div>
<script type='text/javascript' src='https://darksky.net/widget/graph-bar/35.0456,-85.3097/us12/en.js?width=100%&height=300&title=Full Forecast&textColor=333333&bgColor=FFFFFF&transparency=false&skyColor=undefined&fontFamily=Default&customFont=&units=us&timeColor=333333&tempColor=333333&currentDetailsOption=false'></script>
<script type='text/javascript' src='https://darksky.net/widget/graph/35.0456,-85.3097/us12/en.js?width=100%&height=300&title=&textColor=333333&bgColor=ransparent&transparency=false&fontFamily=Default&customFont=&units=us&graph=temperature_graph&timeColor=333333&tempColor=333333&lineColor=333333&markerColor=333333'></script>
<script type='text/javascript' src='https://darksky.net/widget/graph/35.0456,-85.3097/us12/en.js?width=100%&height=300&title=&textColor=333333&bgColor=FFFFFF&transparency=false&fontFamily=Default&customFont=&units=us&graph=precip_graph&timeColor=333333&tempColor=333333&lineColor=333333&markerColor=333333'></script>
<style>
  body {
    margin: 0;
    padding: 0;
    margin-top: 1em;
  }
  div {
    display:flex;
    justify-content: center;
    width: 100%;
    margin:0;
    padding:0;
  }
  h1 {
    font-family: Lato,sans-serif;
    font-weight: 600;
    margin: 0;
  }

  #icon {
    display: none;
  }
</style>

<script src="/skycons.js"></script>
<canvas id="icon" width="128" height="128"></canvas>
<script>
  var skycons = new Skycons();
  skycons.add("icon", Skycons.PARTLY_CLOUDY_DAY);
  skycons.play();
</script>

<script>
var intervalID = window.setInterval(myCallback, 1);

function myCallback() {
  var dyn = document.getElementById('dynamic-favion');
  if (dyn) {
    dyn.remove();
  }

  var c = document.getElementById('icon');
  var link = document.createElement('link');
  link.id = 'dynamic-favion';
  link.type = 'image/x-icon';
  link.rel = 'shortcut icon';
  link.href = c.toDataURL();
  document.getElementsByTagName('head')[0].appendChild(link);
}
</script>
</body>
</html>
